name: anchor_mr_pure_thr_8p_v1
symbol: EURUSD
timeframe: M5
data_path: data/anchor_reversion_fx/data/eurusd_m5_features.csv

instrument:
  pip_size: 0.0001
  data_source: local_csv

costs:
  commission: 0.0
  spread_pips: 1.0
  slippage_pips: 0.0

execution:
  fill_mode: next_open
  intrabar_path: OHLC
  intrabar_tie: sl_first
  entry_delay_bars: 0

risk:
  # En tus runs baseline: strict_no_eof + buffer 300
  validity_mode: strict_no_eof

  force_exit_on_eof: true
  eof_buffer_bars: 300

  # MR puro => sin SL, pero con proxy para métricas R
  allow_missing_sl: true
  risk_proxy_price: 0.0005  # 5 pips

  # En strict_no_eof no queremos permitir FORCE_EOF como "allowed"
  allowed_forced_exit_reasons:
    - FORCE_MAX_HOLD

  # Guardrail duro para que nunca existan trades eternos (288 barras = 1 día)
  # OJO: el engine lee guardrails_cfg / guardrails / legacy; aquí fijamos el path correcto
  guardrails_cfg:
    max_holding_bars: 288

strategy:
  name: AnchorReversionFXNoBracket
  params:
    qty: 1.0
    anchor_col: ny_open
    warmup_bars: 0

    # Señal MR
    entry_threshold_pips: 8
    exit_threshold_pips: 0.5

    # Time stop en la estrategia (puede coexistir con guardrail)
    max_hold_bars: 288

    tag: AnchorMR_Pure_8p_v1
