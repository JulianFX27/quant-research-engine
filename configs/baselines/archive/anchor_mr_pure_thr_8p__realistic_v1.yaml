# configs/baselines/anchor_mr_pure_thr_8p__realistic_v1.yaml
#
# Baseline congelado (realistic v1)
# - Estrategia: AnchorReversionFXNoBracket (anchor-touch MR)
# - Instrumento: EURUSD M5
# - Ejecución: next_open, OHLC, sl_first
# - Costos realistas: spread 1.0 pip, slippage 0.2 pip
# - Risk: strict_no_eof + EOF buffer, allow_missing_sl + proxy R, guardrail 24h
#
# Nota: Este baseline debe producir ~2.7k trades y exit predominante por ANCHOR_TOUCH.

name: anchor_mr_pure_thr_8p__realistic_v1
symbol: EURUSD
timeframe: M5
data_path: data/anchor_reversion_fx/data/eurusd_m5_features.csv

instrument:
  pip_size: 0.0001
  data_source: local_csv

costs:
  commission: 0.0
  spread_pips: 1.0
  slippage_pips: 0.2

execution:
  fill_mode: next_open
  intrabar_path: OHLC
  intrabar_tie: sl_first
  entry_delay_bars: 0

risk:
  validity_mode: strict_no_eof
  force_exit_on_eof: true
  eof_buffer_bars: 300

  # MR puro (sin SL real) => métricas en R requieren proxy
  allow_missing_sl: true
  risk_proxy_price: 0.0005  # 5 pips = 1R proxy (si cambias el concepto de R, ajusta esto)

  # En strict_no_eof: solo permitimos forced exit por tiempo (nunca EOF)
  allowed_forced_exit_reasons:
    - FORCE_MAX_HOLD

  # Guardrail duro para evitar trades eternos: 288 barras = 24h en M5
  guardrails_cfg:
    max_holding_bars: 288

strategy:
  name: AnchorReversionFXNoBracket
  params:
    qty: 1.0
    anchor_col: ny_open
    warmup_bars: 0

    # Señal MR (thr 8p)
    entry_threshold_pips: 8
    exit_threshold_pips: 0.3

    # Time stop en estrategia (redundante pero OK; el guardrail es el enforcement real)
    max_hold_bars: 288

    tag: AnchorMR_Pure_8p__Realistic_v1
