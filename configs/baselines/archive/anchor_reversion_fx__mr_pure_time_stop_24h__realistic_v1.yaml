name: anchor_reversion_fx__mr_pure_realistic_v1
symbol: EURUSD
timeframe: M5
data_path: data/anchor_reversion_fx/data/eurusd_m5_features.csv

instrument:
  pip_size: 0.0001
  data_source: local_csv

costs:
  commission: 0.0
  spread_pips: 1.0
  slippage_pips: 0.2

execution:
  fill_mode: next_open
  intrabar_path: OHLC
  intrabar_tie: sl_first
  entry_delay_bars: 0

risk:
  validity_mode: strict_no_eof
  force_exit_on_eof: true
  eof_buffer_bars: 300

  # MR puro: sin SL real, pero métricas R necesitan proxy
  allow_missing_sl: true
  #anchor_reversion_fx__mr_pure_time_stop_24h__realistic_v1
  risk_proxy_price: 0.0005   # 5 pips = 1R proxy (ajústalo si cambias concepto de R)

  # IMPORTANTE: permitir SOLO forced exit por tiempo
  allowed_forced_exit_reasons:
    - FORCE_MAX_HOLD

  # Guardrail duro: 288 barras = 24h en M5
  guardrails_cfg:
    max_holding_bars: 288

strategy:
  name: AnchorReversionFX
  params:
    qty: 1.0

    # Señal (equivalente conceptual a tu "thr_8p")
    shock_z_entry: 2.0
    min_dist_pips: 8.0

    # Hint (no confiar en esto para cortar; el corte real es el guardrail)
    horizon_bars: 288

    # MR puro: sin SL
    sl_mode: none

    # Sesiones (si tu dataset tiene columna "session")
    sessions: ["LONDON", "NY"]
    col_session: session

    # Column mapping (dataset actual)
    col_close: close
    col_shock_z: shock_z
    col_dist_pips: dist_to_anchor_pips
    dist_is_price: false
